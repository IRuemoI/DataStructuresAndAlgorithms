# [从暴力递归到动态规划3](https://www.bilibili.com/video/BV1tDvaeQExf)

### 题目一：最长回文子序列

题目：

给定一个字符串str，返回这个字符串的最长回文子序列长度。比如: str =“a12b3c43def2ghi1kpm'，他的最长回文子序列是“1234321”或者“123c321”，返回长度7

思路：

方案一：以上节的最长公共最序列为基础，将所求的字符串逆序后，他们的最初公共子序列就是所求字符串的最长回文子序列

方案二：范围尝试模型。根据暴力递归的基本情况(递归的退出条件)来填充表中的初始数据。表的左下角没有意义，其他普遍位置的数据依赖他的左、下和左下的三个位置来得到。按照合理的方式填满表格即可。

**动态规划的优化：去除重复依赖**

在这个案例中，B依赖A、C、D，而且B是A、C、D的中的最大值，所以B大于等A、C、D。而A依赖1、2、C。因为A也是大于等于C的，所以B大于等于A。所以左下的依赖可以被优化掉，不用考虑。

|  1   |  A   |  B   |
| :--: | :--: | :--: |
|  2   |  C   |  D   |

Tips:一个问题会有多种尝试得出答案, 一定要会写尝试;范围尝试模型考虑的是输入变量头尾元素的取舍，样本尝试模型考虑的是输入变量尾部元素的取舍

### 题目二：马只走K步跳到指定位置的方法数

题目：

当前象棋棋子马所在的位置是(x,y)还剩下rest步需要跳。求跳完rest步，正好跳到(a,b)的方法数是多少？

思路：有八个可以尝试从方向。dp\[10\]\[9\]\[k+1\]。虽然是三维的表，但是每层值只依赖下层的表。


如果位置依赖特别复杂, 就不改严格动态规划, 用傻缓存就行了

### 题目三：所有咖啡杯变干净的最早时间

题目：

数组arr代表每一个咖啡机冲一杯咖啡的时间，每个咖啡机只能串行的制造咖啡。现在有n个人需要喝咖啡，只能用咖啡机来制造咖啡。认为每个人喝咖啡的时间非常短，冲好的时间即是喝完的时间。每个人喝完之后咖啡杯可以选择洗或者自然挥发干净，只有一台洗咖啡杯的机器，只能串行的洗咖啡杯。洗杯子的机器洗完一个杯子时间为a，任何一个杯子自然挥发干净的时间为b。四个参数：arr, n, a, b假设时间点从0开始，返回所有人喝完咖啡并洗完咖啡杯的全部过程结束后，至少来到什么时间点。

思路：

1. 使用小根堆，排序依据为何时喝完咖啡(就绪时间加上泡咖啡的时间)，这样就可以计算下个就绪的时间戳。拿出拿出放入两次操作就可以完成排队行为的模拟.
2. 在得到所有人都喝完了咖啡的最早时间的数组后，考虑如何组合使用清洗机器和挥发两种方法保证用最短的时间让所有的被子都变干净
3. 分别尝试让杯子用清洗机器洗干净或者用挥发两种方式(类似零一背包)，也就是DP阶段记录完成时间的的最晚时间。然后争取用时最少

寻找业务限制的尝试模型

注意：**在可变参数的范围估计不出来时，用业务的最坏情况或者一般解去估计**

范围尝试模型：在乎讨论开头和结尾如何

样本对应模型：在乎讨论结尾如何

